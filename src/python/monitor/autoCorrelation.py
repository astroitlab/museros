#coding=utf-8from PyQt4 import QtGui,QtCoreclass CreateImage(QtCore.QObject):    def __init__(self,width,height):          self.width = width        self.height = height        self.a = 0        self.b = 0               def paintImage(self,channel,data):                self.a = 0        self.b = 0        image = QtGui.QImage(self.width,self.height,QtGui.QImage.Format_RGB32)        qp = QtGui.QPainter()                qp.begin(image)        qp.setPen(QtCore.Qt.white)#���ó�ʼ����        qp.setBrush(QtCore.Qt.white)#���ó�ʼ��ˢ        qp.drawRect(0,0,self.width,self.height)#�ڻ����ϻ���һ����ʼ��ͼ                qp.setFont(QtGui.QFont('Decorative', 20))        self.drawRectangles(qp,channel,data)        self.drawLine(qp)        self.drawXtext(qp)        self.drawYtext(qp)        qp.end()        return image        def drawRectangles(self,qp,channel,data):        color = QtGui.QColor(0, 0, 0)        color.setNamedColor('#d4d4d4')        qp.setPen(color)        qp.setBrush(QtGui.QColor(255,69,0))        flag=True        while(flag):            if data!=None:                flag=False                for i in range(0,data.shape[1] - 4):                    data[channel][i]=data[channel][i]/(10**8)                    if data[channel][i] > self.a:                        self.a=data[channel][i]                                        self.b=800/self.a                for i in range(0,data.shape[1] - 4):                    data[channel][i]=data[channel][i]*self.b                    qp.drawRect(80+21.9*i,900-data[channel][i],21.9,data[channel][i])                        def drawLine(self,qp):        pen = QtGui.QPen(QtCore.Qt.black, 1, QtCore.Qt.SolidLine)        qp.setPen(pen)        qp.drawLine(956,80,956,900)        qp.drawLine(79,80,79,900)        qp.drawLine(79,900,956,900)        qp.drawLine(79,80,956,80)            def drawXtext(self,qp):        pen = QtGui.QPen(QtCore.Qt.black, 1,QtCore.Qt.DashLine)        qp.setPen(pen)        qp.drawLine(80+21.9*13,80,80+21.9*13,900)        qp.drawLine(80+21.9*26,80,80+21.9*26,900)        qp.drawLine(80+21.9*39,80,80+21.9*39,900)                qp.drawText(75,920,'IA0')        qp.drawText(80+21.9*11.5,920,'IA13')        qp.drawText(80+21.9*24.5,920,'IB13')        qp.drawText(80+21.9*37.5,920,'IC13')        qp.drawText(40+21.9*20,950,'ANTENNA')                    def drawYtext(self,qp):        pen = QtGui.QPen(QtCore.Qt.black, 1,QtCore.Qt.DashLine)        qp.setPen(pen)        qp.drawText(5,445,'P')        qp.drawText(5,466,'O')        qp.drawText(5,487,'W')        qp.drawText(5,508,'E')        qp.drawText(5,529,'R')        qp.drawText(80,80,'le8')        qp.drawText(35,900,'0.0')        flag=True        i=0        while(flag):            if i<self.a<(i+1):                flag=False                              if i<self.a<(i+0.5):                    c=0.5                    d=i                    for n in range(0,2*i):                        qp.drawLine(79,60+self.b*(d),956,60+self.b*(d))                        qp.drawText(35,60+self.b*(d),str(c))                        c+=0.5                        d-=0.5                 else:                    c=0.5                    d=i+0.5                    for n in range(0,2*i+1):                        qp.drawLine(79,60+self.b*(d),956,60++self.b*(d))                        qp.drawText(35,60+self.b*(d),str(c))                        c+=0.5                        d-=0.5                   else:                i+=1