#coding=utf-8'''Created on 2014年8月16日@author: Ruyao KenShin'''from PyQt4 import QtGuifrom PyQt4 import QtCoreimport drawThread as drawimport time as timport imageCell as imageclass LayoutPanel(QtGui.QWidget):    def __init__(self,width,height,imageType):        super(LayoutPanel,self).__init__()        self.width = width        self.height = height        self.imageType = imageType        self.imageCellId_Var = 0        self.initUI()        self.thread = draw.DrawImageThread(self.imageType)        self.connect(self.thread, QtCore.SIGNAL("output(PyQt_PyObject)"), self.addImage)        self.thread.sender(self.width,self.height)    def initUI(self):         self.widgetList=[]        self.leftLayout=QtGui.QGridLayout()        self.rightLayout=QtGui.QGridLayout()        mainLayout=QtGui.QGridLayout(self)        mainLayout.setMargin(0)        mainLayout.setSpacing(3)        self.rightLayout.setMargin(2)        self.rightLayout.setSpacing(2)        i = 0        while(i != 17):            widget = image.ImageCell(i)            self.connect(widget, QtCore.SIGNAL('doubleClick(PyQt_PyObject)'), self.exchangImagePostion)            self.connect(widget, QtCore.SIGNAL('selectWidget(PyQt_PyObject)'), self.selectWidget)            self.widgetList.append(widget)            if i == 0:                self.leftLayout.addWidget(self.widgetList[i])            else:                self.rightLayout.addWidget(self.widgetList[i],(i-1)/4,(i-1)%4)            i+=1        mainLayout.addLayout(self.leftLayout,0,0)         mainLayout.addLayout(self.rightLayout,0,1)    def addImage(self,imageList):       for i in range(len(imageList)):            if i == 0:                self.widgetList[i].setImage(imageList[self.imageCellId_Var])            self.widgetList[i+1].setImage(imageList[i])            #print t.strftime('%Y-%m-%d %H:%M:%S',t.localtime(t.time()))    def exchangImagePostion(self,imageCellId):        self.widgetList[0].setImage(self.widgetList[imageCellId].image)        self.imageCellId_Var = imageCellId-1    def selectWidget(self,widgetId):        self.widgetList[0].setImage(self.widgetList[widgetId].image)        for i in range(len(self.widgetList)):            if i != widgetId:                self.widgetList[i].cancelSelected()                            